<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layouts/main-layout}">
<head>
<title>Create Schedule - University CMS</title>
</head>
<body>
	<main layout:fragment="content">
		<div class="container">
			<h1 class="mt-5">Create Schedule</h1>
			<a class="btn btn-secondary mb-3" th:href="@{/schedules}">Back to
				schedule list</a>
			<form th:action="@{/schedules/schedule-create}"
				th:object="${schedule}" method="post">

				<div class="row mb-3">
					<div class="col-md-4">
						<label for="lessonStart" class="form-label">Start Time</label> <input
							type="datetime-local" class="form-control" id="lessonStart"
							th:field="*{lessonStart}" required>
					</div>

					<div class="col-md-4">
						<label for="lessonDuration" class="form-label">Lesson
							Duration</label>
						<div class="d-flex justify-content-between">
							<button type="button" class="btn btn-outline-primary btn-sm"
								onclick="setLessonDuration(30)">30 min</button>
							<button type="button" class="btn btn-outline-primary btn-sm"
								onclick="setLessonDuration(45)">45 min</button>
							<button type="button" class="btn btn-outline-primary btn-sm"
								onclick="setLessonDuration(60)">60 min</button>
							<button type="button" class="btn btn-outline-primary btn-sm"
								onclick="setLessonDuration(90)">90 min</button>
						</div>
					</div>

					<div class="col-md-4">
						<label for="lessonEnd" class="form-label">End Time</label> <input
							type="datetime-local" class="form-control" id="lessonEnd"
							th:field="*{lessonEnd}" required>
					</div>
				</div>

				<div class="row mb-3">
					<div class="col-md-3">
						<label for="course" class="form-label">Course</label> <select
							class="form-select" id="course" th:field="*{course.courseId}"
							required>
							<option value="" selected disabled>Select a course</option>
							<option th:each="course : ${courses}"
								th:value="${course.courseId}" th:text="${course.courseName}"></option>
						</select>
					</div>
					<div class="col-md-3">
						<label for="teacher" class="form-label">Teacher</label> <select
							class="form-select" id="teacher" th:field="*{teacher.userId}"
							required>
							<option value="" selected disabled>Select a teacher</option>
						</select>
					</div>
					<div class="col-md-3">
						<label for="lessonType" class="form-label">Lesson Type</label> <select
							class="form-select" id="lessonType"
							th:field="*{lessonType.lessonTypeId}" required>
							<option value="" selected disabled>Select a lesson type</option>
							<option th:each="lessonType : ${lessonTypes}"
								th:value="${lessonType.lessonTypeId}"
								th:text="${lessonType.name}"></option>
						</select>
					</div>
					<div class="col-md-3">
						<label for="classroom" class="form-label">Classroom</label> <select
							class="form-select" id="classroom"
							th:field="*{classroom.classroomId}" required>
							<option th:each="classroom : ${classrooms}"
								th:value="${classroom.classroomId}"
								th:text="${classroom.number}"
								th:classappend="${classroom.occupied} ? 'text-danger' : ''"
								th:title="${classroom.occupied} ? 'Course: ' + ${classroom.courseName} + 
                              ', Teacher: ' + ${classroom.teacher.firstName} + ' ' + ${classroom.teacher.lastName} +
                              ', Time: ' + ${classroom.startTime} + ' - ' + ${classroom.endTime} : ''">
							</option>
						</select>
					</div>
				</div>
				<button type="submit" class="btn btn-primary">Create
					Schedule</button>
				<a th:href="@{/schedules}" class="btn btn-secondary">Cancel</a>
			</form>
		</div>

		<script th:src="@{/js/schedule.js}"></script>
	</main>
</body>
</html>
